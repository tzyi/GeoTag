# Feat-透過GPX幫照片添加地理位置

## specify

```
/speckit.specify 請在現有的 React Electron 照片地理位置應用程式中，擴充「GPX 軌跡匹配」工作流。請確保新 UI 符合以下規格：

[背景資訊]
使用者需要透過導入 GPX 軌跡文件，自動為大量照片標記位置。由於時間戳可能存在誤差，介面必須允許手動微調與即時預覽。

[具體指令]

- 左側控制區 (Sidebar)：在「匯入照片」下方新增一個「匯入 GPX 軌跡」按鈕（建議使用不同的按鈕樣式或邊框色）。當 GPX 匯入後，列出軌跡段資訊（時間起訖、總里程）。

- 地圖視覺化 (Map View)：
    在地圖上繪製一條 鮮藍色（#3B82F6） 的路徑（Polyline）表示 GPX 軌跡。
    匹配成功的照片會以 自定義 Marker（顯示縮圖的小圓點）落在軌跡線上。

- 匹配狀態邏輯：
    自動標記：左側照片清單中，若拍攝時間落於 GPX 軌跡範圍內，縮圖右上角需顯示 綠色打勾標籤（Badge）。
    選取狀態：點擊清單中的照片，地圖自動平移（Pan To）至對應座標。

- 手動微調機制 (Manual Adjustment)：
    地圖上的照片標記設定為「可拖拽（Draggable）」。
    當使用者拖動標記時，右側面板需即時顯示「修正後的座標」與「原始軌跡點偏移量」。
    新增一個浮動的工具列，包含「確認更新 EXIF」與「重設回軌跡點」按鈕。

- 時間偏移補償 (Time Offset)：
    GPX 匹配最常遇到的問題是「相機時間」與「GPS 時間」不一致。我建議你在 UI 的 GPX 匯入區，額外要求一個 「時間偏移調整（Time Offset Slider）」。使用者拖動滑桿，地圖上的照片標記就會沿著軌跡線集體滑動，這會讓匹配過程變得極其高效。

- 區分「已寫入」與「待處理」：
    在左側縮圖牆，除了綠色勾選框（代表匹配成功），建議對於已經成功執行「寫入 EXIF」的操作，將縮圖透明度降低或加上「Locked」圖標，防止重複操作。

- 地圖圖層切換：
    由於 OpenStreetMap 在某些地區不夠細緻，建議在 UI 右上角加入一個簡易的圖層切換器（街道圖 / 衛星圖），這對於「手動微調」特定路口的位置非常有幫助。
```